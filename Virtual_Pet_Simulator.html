<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Virtual Pet Simulator</title>
  <style>
    :root{
      --bg:#f4f7fb;
      --card:#fff;
      --accent:#4f46e5;
      --muted:#7b8a9a;
      --good:#16a34a;
      --warn:#f59e0b;
      --bad:#ef4444;
      --radius:14px;
    }

    *{box-sizing:border-box;font-family:Inter, system-ui, Arial, sans-serif}
    body{
      margin:0;
      background:linear-gradient(180deg,#e9f0ff 0%,var(--bg) 100%);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .app {
      width:100%;
      max-width:900px;
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:0 10px 30px rgba(18,38,63,0.08);
      padding:24px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:24px;
    }

    /* Left panel (pet) */
    .pet-panel{
      background:linear-gradient(180deg,#ffffff,#fbfdff);
      border-radius:12px;
      padding:18px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
      justify-content:center;
      min-height:360px;
    }
    .pet-face{
      font-size:96px;
      width:180px;
      height:180px;
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius:50%;
      background:linear-gradient(180deg,#fff,#f0f8ff);
      box-shadow:0 8px 20px rgba(79,70,229,0.08);
      transition:transform .35s ease, filter .35s ease;
    }
    .pet-face.happy { transform:translateY(-6px) scale(1.06); }
    .pet-face.sad { filter:grayscale(.4) brightness(.9) }
    .pet-face.sleeping { transform: rotate(-6deg) scale(.98); opacity: .85; filter: blur(.3px); }

    .pet-name{ font-weight:700; font-size:20px; color:#0f172a; }
    .pet-status { color:var(--muted); font-size:13px }

    .controls{
      display:flex;
      gap:8px;
      margin-top:6px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:600;
      background:var(--accent);
      color:#fff;
      box-shadow:0 6px 14px rgba(79,70,229,0.16);
      transition:transform .12s ease, opacity .12s;
    }
    .btn.secondary{
      background:#e6eefc;
      color:var(--accent);
      box-shadow:none;
      font-weight:700;
    }
    .btn:active{ transform:translateY(2px) }

    /* Right panel (attributes & log) */
    .right{
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .card{
      background:linear-gradient(180deg,#fff,#fbfdff);
      border-radius:12px;
      padding:16px;
      box-shadow:0 6px 18px rgba(11,23,50,0.04);
    }
    h3{ margin:0 0 8px 0; color:#0b1220 }
    .attr{
      display:flex;
      align-items:center;
      gap:12px;
      margin:10px 0;
    }
    .attr .label{ width:88px; font-weight:600; color:#0f172a; font-size:14px }
    .progress{
      flex:1;
      height:16px;
      background:#e9eef7;
      border-radius:999px;
      overflow:hidden;
      position:relative;
    }
    .progress > i{
      display:block;
      height:100%;
      width:0%;
      background:linear-gradient(90deg,#60a5fa,#6366f1);
      border-radius:999px;
      transition:width .4s ease;
      box-shadow: inset 0 -4px 8px rgba(0,0,0,0.06);
    }
    .progress .bar-good{ background:linear-gradient(90deg,#34d399,#10b981) }
    .progress .bar-warn{ background:linear-gradient(90deg,#fbbf24,#f97316) }
    .progress .bar-bad{ background:linear-gradient(90deg,#fb7185,#ef4444) }

    .values { width:60px; text-align:right; font-weight:700; color:#0b1220 }

    .log{
      max-height:160px;
      overflow:auto;
      padding:8px;
      border-radius:8px;
      background:linear-gradient(180deg,#fbfdff,#f6f9ff);
      font-size:13px;
      color:#1f2937;
    }
    .log p{ margin:4px 0; }

    .meta{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
      margin-top:6px;
      color:var(--muted);
      font-size:13px;
    }

    /* Responsive */
    @media (max-width:820px){
      .app{ grid-template-columns: 1fr; padding:18px; }
      .pet-panel{ min-height:300px }
    }
  </style>
</head>
<body>
  <main class="app" role="application" aria-label="Virtual pet simulator">
    <section class="pet-panel card" aria-labelledby="petName">
      <div id="petFace" class="pet-face" aria-hidden="true">üê∂</div>
      <div id="petName" class="pet-name">Buddy</div>
      <div id="petMood" class="pet-status">Feeling okay</div>

      <div class="controls" role="group" aria-label="Actions">
        <button id="feedBtn" class="btn">Feed üçó</button>
        <button id="playBtn" class="btn secondary">Play üéæ</button>
        <button id="sleepBtn" class="btn">Sleep üò¥</button>
        <button id="renameBtn" class="btn secondary">Rename ‚úè</button>
      </div>

      <div class="meta">
        <div>Age: <strong id="age">0</strong> days</div>
        <div>Time: <span id="time">--:--</span></div>
      </div>
    </section>

    <section class="right">
      <div class="card" aria-labelledby="statusTitle">
        <h3 id="statusTitle">Pet Status</h3>

        <div class="attr">
          <div class="label">Hunger</div>
          <div class="progress" title="Hunger level" aria-hidden="true"><i id="hungerBar"></i></div>
          <div class="values" id="hungerVal">100</div>
        </div>

        <div class="attr">
          <div class="label">Happiness</div>
          <div class="progress" title="Happiness level" aria-hidden="true"><i id="happyBar"></i></div>
          <div class="values" id="happyVal">100</div>
        </div>

        <div class="attr">
          <div class="label">Energy</div>
          <div class="progress" title="Energy level" aria-hidden="true"><i id="energyBar"></i></div>
          <div class="values" id="energyVal">100</div>
        </div>

        <div style="margin-top:12px; color:var(--muted); font-size:13px;">Tip: attributes update over time. Use actions to care for your pet.</div>
      </div>

      <div class="card" aria-labelledby="logTitle">
        <h3 id="logTitle">Activity Log</h3>
        <div id="log" class="log" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <script>
    // --- State ---
    const state = {
      hunger: 100,     // 0 = starving, 100 = full
      happiness: 100,  // 0 - 100
      energy: 100,     // 0 - 100
      ageDays: 0,
      lastTick: Date.now()
    };

    // DOM
    const hungerBar = document.getElementById('hungerBar');
    const happyBar = document.getElementById('happyBar');
    const energyBar = document.getElementById('energyBar');
    const hungerVal = document.getElementById('hungerVal');
    const happyVal = document.getElementById('happyVal');
    const energyVal = document.getElementById('energyVal');
    const petFace = document.getElementById('petFace');
    const petMood = document.getElementById('petMood');
    const logEl = document.getElementById('log');
    const ageEl = document.getElementById('age');
    const timeEl = document.getElementById('time');

    // Buttons
    const feedBtn = document.getElementById('feedBtn');
    const playBtn = document.getElementById('playBtn');
    const sleepBtn = document.getElementById('sleepBtn');
    const renameBtn = document.getElementById('renameBtn');

    // --- Utilities ---
    function clamp(v){ return Math.max(0, Math.min(100, Math.round(v))); }
    function pushLog(text){
      const p = document.createElement('p');
      p.textContent = `${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})} ‚Äî ${text}`;
      logEl.prepend(p);
    }

    function setBars(){
      hungerBar.style.width = state.hunger + '%';
      happyBar.style.width = state.happiness + '%';
      energyBar.style.width = state.energy + '%';

      // coloring by thresholds
      hungerBar.className = state.hunger > 60 ? 'bar-good' : state.hunger > 30 ? 'bar-warn' : 'bar-bad';
      happyBar.className = state.happiness > 60 ? 'bar-good' : state.happiness > 30 ? 'bar-warn' : 'bar-bad';
      energyBar.className = state.energy > 60 ? 'bar-good' : state.energy > 30 ? 'bar-warn' : 'bar-bad';

      hungerVal.textContent = state.hunger;
      happyVal.textContent = state.happiness;
      energyVal.textContent = state.energy;
      ageEl.textContent = state.ageDays;
    }

    function updateTime(){
      const d = new Date();
      timeEl.textContent = d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    }

    function updateMood(){
      // choose emoji and message based on attributes
      if (state.energy < 20) {
        petFace.textContent = 'üò¥';
        petFace.className = 'pet-face sleeping';
        petMood.textContent = 'Sleepy...';
      } else if (state.hunger < 30) {
        petFace.textContent = 'üòø';
        petFace.className = 'pet-face sad';
        petMood.textContent = 'I\'m hungry!';
      } else if (state.happiness < 30) {
        petFace.textContent = '‚òπ';
        petFace.className = 'pet-face sad';
        petMood.textContent = 'Feeling down';
      } else if (state.happiness > 75 && state.hunger > 60) {
        petFace.textContent = 'üòÑ';
        petFace.className = 'pet-face happy';
        petMood.textContent = 'So happy!';
      } else {
        petFace.textContent = 'üôÇ';
        petFace.className = 'pet-face';
        petMood.textContent = 'Feeling okay';
      }
    }

    // --- Actions ---
    function feed(){
      const prev = {...state};
      state.hunger = clamp(state.hunger + 30);
      state.happiness = clamp(state.happiness + 6);
      // feeding doesn't change energy much
      setBars(); updateMood(); pushLog('Fed the pet üçó');
      // small bounce visual
      petFace.classList.add('happy');
      setTimeout(()=>petFace.classList.remove('happy'),400);
    }

    function play(){
      if (state.energy < 15) {
        pushLog('Too tired to play üò¥');
        return;
      }
      state.happiness = clamp(state.happiness + 25);
      state.energy = clamp(state.energy - 15);
      state.hunger = clamp(state.hunger - 10);
      setBars(); updateMood(); pushLog('Played with the pet üéæ');
      petFace.classList.add('happy');
      setTimeout(()=>petFace.classList.remove('happy'),500);
    }

    function sleep(){
      state.energy = clamp(state.energy + 40);
      state.hunger = clamp(state.hunger - 20);
      state.happiness = clamp(state.happiness + 6);
      setBars(); updateMood(); pushLog('Pet took a nap üò¥');
    }

    function rename(){
      const newName = prompt('Give your pet a name:', document.getElementById('petName').textContent);
      if (newName && newName.trim()){
        document.getElementById('petName').textContent = newName.trim();
        pushLog('Renamed pet to "' + newName.trim() + '"');
      }
    }

    // --- Game tick (decay & age) ---
    const TICK_MS = 5000; // every 5 seconds
    function tick(){
      // natural decay
      state.hunger = clamp(state.hunger - 4);      // gets hungrier
      state.happiness = clamp(state.happiness - 2); // boredom decreases happiness
      state.energy = clamp(state.energy - 3);       // energy slowly goes down

      // age increases slowly (we'll add 1 day every 12 ticks -> roughly once per minute in demo)
      const now = Date.now();
      if (now - state.lastTick >= 12 * TICK_MS) {
        state.ageDays += 1;
        state.lastTick = now;
      }

      // if starving or exhausted, happiness drops faster
      if (state.hunger <= 10 || state.energy <= 5) {
        state.happiness = clamp(state.happiness - 6);
        pushLog('Pet is in poor condition ‚Äî take care!');
      }

      // if all good, small auto-happiness gain occasionally
      if (state.hunger > 70 && state.energy > 60 && state.happiness < 95) {
        state.happiness = clamp(state.happiness + 2);
      }

      setBars();
      updateMood();
      saveState();
    }

    // --- Persistence (localStorage) ---
    function saveState(){
      const toSave = {
        hunger: state.hunger,
        happiness: state.happiness,
        energy: state.energy,
        ageDays: state.ageDays,
        petName: document.getElementById('petName').textContent
      };
      try { localStorage.setItem('virtualPetState', JSON.stringify(toSave)); }
      catch(e){}
    }
    function loadState(){
      try {
        const raw = localStorage.getItem('virtualPetState');
        if (!raw) return;
        const s = JSON.parse(raw);
        if (s.hunger!=null) state.hunger = clamp(s.hunger);
        if (s.happiness!=null) state.happiness = clamp(s.happiness);
        if (s.energy!=null) state.energy = clamp(s.energy);
        if (s.ageDays!=null) state.ageDays = s.ageDays;
        if (s.petName) document.getElementById('petName').textContent = s.petName;
      } catch(e){}
    }

    // --- Bind events ---
    feedBtn.addEventListener('click', feed);
    playBtn.addEventListener('click', play);
    sleepBtn.addEventListener('click', sleep);
    renameBtn.addEventListener('click', rename);

    // keyboard shortcuts for convenience
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'f') feed();
      if (e.key === 'p') play();
      if (e.key === 's') sleep();
    });

    // --- Init ---
    loadState();
    setBars();
    updateMood();
    updateTime();
    pushLog('Welcome! Take good care of your pet üêæ');
    saveState();

    // start loops
    setInterval(()=>{ tick(); }, TICK_MS);
    setInterval(updateTime, 60 * 1000); // update clock each minute
  </script>
</body>
</html>